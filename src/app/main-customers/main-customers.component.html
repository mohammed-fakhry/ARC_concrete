<div class="mainContainer">

  <div class="row stickyBox">

    <div class="col-lg-4 col-md-6">
      <mat-card class="boxShadow">
        <mat-card-header class="d-flex justify-content-between">
          <mat-card-title>اجماليات</mat-card-title>
          <mat-card-subtitle>توصيف الموقف المالى للشركات الرئيسية</mat-card-subtitle>
          <div class="form-inline">
          </div>
        </mat-card-header>
        <mat-card-content>
          <table class="w-100">
            <tbody class="tableBody">
              <tr class="secondaryBadge borderLsecondary noHover">
                <th>توريدات</th>
                <td>{{tableTotals.customerTotals | number: '1.0-2'}}</td>
              </tr>
              <tr class="dangerBadge borderLdanger noHover">
                <th>خرسانة</th>
                <td>{{tableTotals.concreteTotals | number: '1.0-2'}}</td>
              </tr>
              <tr class="darkBadge borderLdark noHover">
                <th>مُعدات</th>
                <td>{{tableTotals.trucktotals | number: '1.0-2'}}</td>
              </tr>
              <tr class="darkBadge borderLdark noHover">
                <th>احلال</th>
                <td>{{tableTotals.customer_Substitute_totals | number: '1.0-2'}}</td>
              </tr>
              <tr class="darkBadge borderLdark noHover">
                <th>حفر</th>
                <td>{{tableTotals.customer_digging_totals | number: '1.0-2'}}</td>
              </tr>
              <tr class="lightBg textBold noHover">
                <th>اجمالى</th>
                <td>{{tableTotals.totalVal | number: '1.0-2'}}</td>
              </tr>
            </tbody>
            <!-- <thead>
            </thead>
             -->
          </table>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-lg-4 col-md-6">
      <img class="sideLogo" src="assets/logos/Partner-Organisation.png" style="max-height: 350px; opacity: .65;">
    </div>
  </div>

  <div class="box stickyBox mb-3" style="background-color: transparent;">

    <mat-card class="borderLsecondary" id="mainCompanies_mat_card">
      <mat-card-header class="d-flex justify-content-between">
        <!-- <div mat-card-avatar>avatar</div> -->
        <mat-card-title>الشركات الأُم</mat-card-title>
        <mat-card-subtitle>بيان بارصدة الشركات الاُم للمشاريع على مستوى النظام</mat-card-subtitle>
        <div class="form-inline">
          <div class="my-auto">
            <!-- <a mat-button color="accent" routerLink="/SafeReceipt" matTooltipPosition="above"
              matTooltip="ايصال جديد">
              <i class="fa fa-plus fa-lg pt-1 textBold"></i>
            </a>
            <button mat-button color="primary" routerLink="/AddSafe">اضافة خزنة</button> -->
            <mat-form-field class="searchForm" style="width: 500px;">
              <input matInput placeholder="بحث" name="searchTxt" [(ngModel)]='searchTxt' (ngModelChange)="search()">
            </mat-form-field>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content>
        <div class="example-container">
          <table [dataSource]="listData" mat-table class="full-width-table" matSort aria-label="Elements">
            <ng-container matColumnDef="fullName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>الاسم</th>
              <td mat-cell *matCellDef="let row; let i = index" id="mainCustomerCell{{i}}"
                class="pl-2 mainCustomerCells" style="cursor: pointer;" [class.textDanger]="row.totalVal < 0">
                {{row.fullName}}
              </td>
              <!-- <td mat-footer-cell *matFooterCellDef> اجمالى </td> -->
            </ng-container>

            <ng-container matColumnDef="customerTotals">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>توريدات</th>
              <td mat-cell *matCellDef="let row" [class.textDanger]="row.customerTotals < 0">
                {{row.customerTotals | number:'1.0-2'}}
              </td>
              <!--  <td mat-footer-cell *matFooterCellDef> {{tableTotals.customerTotals | number: '1.0-2'}} </td> -->
            </ng-container>

            <ng-container matColumnDef="concreteTotals">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>خرسانة</th>
              <td mat-cell *matCellDef="let row" [class.textDanger]="row.concreteTotals < 0">
                {{row.concreteTotals | number:'1.0-2'}}
              </td>
              <!--  <td mat-footer-cell *matFooterCellDef> {{tableTotals.concreteTotals | number: '1.0-2'}} </td> -->
            </ng-container>

            <ng-container matColumnDef="trucktotals">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>مُعدات</th>
              <td mat-cell *matCellDef="let row" [class.textDanger]="row.trucktotals < 0">
                {{row.trucktotals | number:'1.0-2'}}
              </td>
              <!--  <td mat-footer-cell *matFooterCellDef> {{tableTotals.trucktotals | number: '1.0-2'}} </td> -->
            </ng-container>

            <ng-container matColumnDef="customer_Substitute_totals">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>احلال</th>
              <td mat-cell *matCellDef="let row" [class.textDanger]="row.customer_Substitute_totals < 0">
                {{row.customer_Substitute_totals | number:'1.0-2'}}
              </td>
              <td mat-footer-cell *matFooterCellDef> {{tableTotals.customer_Substitute_totals | number: '1.0-2'}} </td>
            </ng-container>

            <ng-container matColumnDef="customer_digging_totals">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>حفر</th>
              <td mat-cell *matCellDef="let row" [class.textDanger]="row.customer_digging_totals < 0">
                {{row.customer_digging_totals | number:'1.0-2'}}
              </td>
              <!--  <td mat-footer-cell *matFooterCellDef> {{tableTotals.customer_digging_totals | number: '1.0-2'}} </td> -->
            </ng-container>

            <ng-container matColumnDef="totalVal">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>اجمالى</th>
              <td mat-cell *matCellDef="let row" class="tdBorder tableHeader_color textBold"
                [class.textDanger]="row.totalVal < 0">
                {{row.totalVal | number:'1.0-2'}}
              </td>
              <!-- <td mat-footer-cell *matFooterCellDef class="tdBorder">
                {{tableTotals.totalVal | number: '1.0-2'}}
              </td> -->
            </ng-container>

            <ng-container matColumnDef="notes">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>ملاحظات</th>
              <td mat-cell *matCellDef="let row" class="tdBorder_right">
                {{row.notes}}
              </td>
              <td mat-footer-cell *matFooterCellDef class="tdBorder_right"> - </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true" class="tableHeader">
            </tr>
            <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns;"
              (click)="postCustomerInfo(i, row.id)" class="mainCustomer-tr{{i}} mainCustomer-tr"
              style="height: fit-content; cursor: pointer;">
            </tr>
            <!-- <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true" class="textBold tableHeader_color"></tr> -->
          </table>
        </div>

        <!-- paginator -->
        <mat-paginator #paginator [length]="listData?.data.length" [pageIndex]="0" [pageSize]="100"
          [pageSizeOptions]="[10, 15, 20, 50, 100, 300, 500, 1000]" class="printX">
        </mat-paginator>

      </mat-card-content>
    </mat-card>
  </div>


  <div class="boxRadios py-3 bigShadow example-container px-2" id="mainCustomerInfo_id">
    <mat-accordion class="example-headers-align mb-4 box">
      <div class="d-flex justify-content-between">
        <div class="form-inline mb-3">
          <button mat-button color="warn" (click)="hideCustomerInfo()"><i class="fa fa-times fa-lg"></i></button>
          <div class="cardHeader pr-2">{{mainCustomerInfo.fullName}}</div>
        </div>

        <div class="cardHeader my-auto pl-3 textBold">
          {{mainCustomerInfo.totalVal | number: '1.0-2'}}
        </div>
      </div>
      <mat-expansion-panel [class.d-none]="mainCustomerInfo.customers.length == 0" class="borderLsecondary">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <i class="fa fa-th my-auto pl-2 textSecondary"></i>
            التوريدات
          </mat-panel-title>
          <mat-panel-description>
            <div class="form-inline">
              <span class="textSecondary textBold pl-2">{{mainCustomerInfo.customers.length}} | </span>
              {{mainCustomerInfo.customerTotals | number: '1.0-2'}}
            </div>

          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="mt-3">
          <div class="panel-body panel-flex-table standTable">
            <table class="flex-table table">
              <thead class="tableHeader">
                <tr>
                  <th style="flex: .5;">م</th>
                  <th style="flex: 2;">الاسم</th>
                  <th>قيمة الحساب</th>
                </tr>
              </thead>
              <tbody class="tableBody">
                <tr *ngFor="let customer of mainCustomerInfo.customers; let i = index">
                  <td style="flex: .5;">{{i + 1}}</td>
                  <td class="textBtn tBtn-dark pl-2" style="flex: 2;"
                    routerLink="/customerInformation/{{customer.customerId}}">
                    {{customer.customerName}}
                  </td>
                  <td>{{customer.customerRemain | number: '1.0-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel [class.d-none]="mainCustomerInfo.concreteCustomers.length == 0" class="borderLdanger">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <i class="fa fa-industry my-auto pl-2 textDanger"></i>
            الخرسانة
          </mat-panel-title>
          <mat-panel-description>
            <div class="form-inline">
              <span class="textSecondary textDanger pl-2">{{mainCustomerInfo.concreteCustomers.length}} | </span>
              {{mainCustomerInfo.concreteTotals | number: '1.0-2'}}
            </div>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="mt-3">
          <div class="panel-body panel-flex-table standTable">
            <table class="flex-table table">
              <thead class="tableHeader">
                <tr>
                  <th style="flex: .5;">م</th>
                  <th style="flex: 2;">الاسم</th>
                  <th>قيمة الحساب</th>
                </tr>
              </thead>
              <tbody class="tableBody">
                <tr *ngFor="let customer of mainCustomerInfo.concreteCustomers; let i = index">
                  <td style="flex: .5;">{{i + 1}}</td>
                  <td class="textBtn tBtn-dark pl-2" style="flex: 2;"
                    routerLink="/ConcreteCustomerInformation/{{customer.id}}">
                    {{customer.fullName}}
                  </td>
                  <td>{{customer.currentVal | number: '1.0-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel [class.d-none]="mainCustomerInfo.truckCustomers.length == 0" class="borderLdark">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <i class="fa fa-truck my-auto pl-2 textDark"></i>
            المُعدات
          </mat-panel-title>
          <mat-panel-description>
            <div class="form-inline">
              <span class="textSecondary textDark pl-2">{{mainCustomerInfo.truckCustomers.length}} | </span>
              {{mainCustomerInfo.trucktotals | number: '1.0-2'}}
            </div>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="mt-3">
          <div class="panel-body panel-flex-table standTable">
            <table class="flex-table table">
              <thead class="tableHeader">
                <tr>
                  <th style="flex: .5;">م</th>
                  <th style="flex: 2;">الاسم</th>
                  <th>قيمة الحساب</th>
                </tr>
              </thead>
              <tbody class="tableBody">
                <tr *ngFor="let customer of mainCustomerInfo.truckCustomers; let i = index">
                  <td style="flex: .5;">{{i + 1}}</td>
                  <td class="textBtn tBtn-dark pl-2" style="flex: 2;"
                    routerLink="/TruckCustomerInformation/{{customer.id}}">
                    {{customer.fullName}}
                  </td>
                  <td>{{customer.currentVal | number: '1.0-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel [class.d-none]="mainCustomerInfo.customer_Substitute.length == 0" class="borderLdark">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <i class="fa fa-truck my-auto pl-2 textDark"></i>
            احلال
          </mat-panel-title>
          <mat-panel-description>
            <div class="form-inline">
              <span class="textSecondary textDark pl-2">{{mainCustomerInfo.customer_Substitute.length}} | </span>
              {{mainCustomerInfo.customer_Substitute_totals | number: '1.0-2'}}
            </div>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="mt-3">
          <div class="panel-body panel-flex-table standTable">
            <table class="flex-table table">
              <thead class="tableHeader">
                <tr>
                  <th style="flex: .5;">م</th>
                  <th style="flex: 2;">الاسم</th>
                  <th>قيمة الحساب</th>
                </tr>
              </thead>
              <tbody class="tableBody">
                <tr *ngFor="let customer of mainCustomerInfo.customer_Substitute; let i = index">
                  <td style="flex: .5;">{{i + 1}}</td>
                  <td class="textBtn tBtn-dark pl-2" style="flex: 2;" routerLink="{{customer.routeTo}}">
                    {{customer.customerName}}
                  </td>
                  <td>{{customer.currentVal | number: '1.0-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel [class.d-none]="mainCustomerInfo.customer_digging.length == 0" class="borderLdark">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <i class="fa fa-wrench my-auto pl-2 textDark"></i>
            حفر
          </mat-panel-title>
          <mat-panel-description>
            <div class="form-inline">
              <span class="textSecondary textDark pl-2">{{mainCustomerInfo.customer_digging.length}} | </span>
              {{mainCustomerInfo.customer_digging_totals | number: '1.0-2'}}
            </div>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="mt-3">
          <div class="panel-body panel-flex-table standTable">
            <table class="flex-table table">
              <thead class="tableHeader">
                <tr>
                  <th style="flex: .5;">م</th>
                  <th style="flex: 2;">الاسم</th>
                  <th>قيمة الحساب</th>
                </tr>
              </thead>
              <tbody class="tableBody">
                <tr *ngFor="let customer of mainCustomerInfo.customer_digging; let i = index">
                  <td style="flex: .5;">{{i + 1}}</td>
                  <td class="textBtn tBtn-dark pl-2" style="flex: 2;" routerLink="{{customer.routeTo}}">
                    {{customer.customerName}}
                  </td>
                  <td>{{customer.currentVal | number: '1.0-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>

  </div>

</div>
